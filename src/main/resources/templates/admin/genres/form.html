<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout/base}">
<head>
    <title th:text="${isEdit ? 'Edit Genre' : 'Add New Genre'}">Genre Form</title>
</head>
<body>
    <div layout:fragment="content">
        <!-- Page Header -->
        <div class="mb-4">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a th:href="@{/admin/dashboard}">Dashboard</a></li>
                    <li class="breadcrumb-item"><a th:href="@{/admin/genres}">Genres</a></li>
                    <li class="breadcrumb-item active" th:text="${isEdit ? 'Edit Genre' : 'Add New Genre'}">Form</li>
                </ol>
            </nav>
            <h2 class="mb-1" th:text="${isEdit ? 'âœï¸ Edit Genre' : 'âž• Add New Genre'}">Genre Form</h2>
            <p class="text-muted mb-0">Fill in the genre details below</p>
        </div>

        <!-- Form Card -->
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body">
                        <form th:action="${isEdit ? '/admin/genres/' + genreDto.id + '/edit' : '/admin/genres/new'}" 
                              method="post" 
                              th:object="${genreDto}">
                            
                            <!-- CSRF Token -->
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

                            <!-- Genre Name -->
                            <div class="mb-4">
                                <label for="name" class="form-label">
                                    Genre Name <span class="text-danger">*</span>
                                </label>
                                <input type="text" class="form-control form-control-lg" id="name" 
                                       th:field="*{name}" 
                                       th:classappend="${#fields.hasErrors('name')} ? 'is-invalid'"
                                       placeholder="Enter genre name (e.g., Science Fiction, Mystery)"
                                       autofocus>
                                <div class="invalid-feedback" th:if="${#fields.hasErrors('name')}" 
                                     th:errors="*{name}">Error</div>
                                <small class="text-muted">
                                    Genre names should be 2-50 characters long
                                </small>
                            </div>

                            <!-- Info for Edit Mode -->
                            <div class="alert alert-info" th:if="${isEdit and genreDto.bookCount != null and genreDto.bookCount > 0}">
                                <i class="bi bi-info-circle me-2"></i>
                                This genre is currently assigned to 
                                <strong th:text="${genreDto.bookCount}">0</strong> 
                                book(s).
                            </div>

                            <!-- Form Actions -->
                            <hr class="my-4">
                            <div class="d-flex justify-content-between">
                                <a th:href="@{/admin/genres}" class="btn btn-outline-secondary">
                                    <i class="bi bi-x-circle me-1"></i> Cancel
                                </a>
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="bi bi-save me-1"></i>
                                    <span th:text="${isEdit ? 'Update Genre' : 'Create Genre'}">Save</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Guidelines Card -->
                <div class="card mt-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0"><i class="bi bi-lightbulb me-2"></i>Genre Guidelines</h5>
                    </div>
                    <div class="card-body">
                        <ul class="mb-0">
                            <li>Use clear, descriptive names</li>
                            <li>Avoid abbreviations when possible</li>
                            <li>Be consistent with capitalization</li>
                            <li>Use specific genres over broad categories (e.g., "Historical Fiction" vs "Fiction")</li>
                        </ul>
                    </div>
                </div>

                <!-- Common Genres Examples -->
                <div class="card mt-3" th:unless="${isEdit}">
                    <div class="card-header bg-light">
                        <h6 class="mb-0">ðŸ“š Common Genre Examples</h6>
                    </div>
                    <div class="card-body">
                        <div class="d-flex flex-wrap gap-2">
                            <span class="badge bg-secondary">Fiction</span>
                            <span class="badge bg-secondary">Non-Fiction</span>
                            <span class="badge bg-secondary">Science Fiction</span>
                            <span class="badge bg-secondary">Fantasy</span>
                            <span class="badge bg-secondary">Mystery</span>
                            <span class="badge bg-secondary">Thriller</span>
                            <span class="badge bg-secondary">Romance</span>
                            <span class="badge bg-secondary">Biography</span>
                            <span class="badge bg-secondary">Self-Help</span>
                            <span class="badge bg-secondary">History</span>
                            <span class="badge bg-secondary">Children's</span>
                            <span class="badge bg-secondary">Young Adult</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

